<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script
			  src="https://code.jquery.com/jquery-3.6.3.min.js"
			  integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
			  crossorigin="anonymous"></script>
		<script>
			function signup(){
				data = {username: signupemail.value,
						password: signuppassword.value};
				console.log(data);
				$.ajax("https://example.com/v2/login", {
					method: 'POST',
					xhrFields: { withCredentials: true },
					data: data,
					crossDomain: true,
					success: () => {console.log('Success')}
				});
			}
			async function login(){
				data = {username: loginemail.value,
						password: loginpassword.value};
				console.log(data);
				jQuery.ajax("http://biografoimaginario.com:8888/login", {
					method: 'POST',
					xhrFields: { withCredentials: true },
					data: data,
					crossDomain: true,
					success: () => {console.log('login success')}
				});
			}
			async function checklogin(){
				jQuery.ajax('http://biografoimaginario.com:8888/isLoggedIn',
					{
						method: 'GET',
						dataType: 'json',
						xhrFields: { withCredentials: true },
						crossDomain: true,
						success: (data) => {
							console.log(`isLoggedIn: ${data.loggedIn}`)
						},
					}
				);
			}
			async function logout(){
				jQuery.ajax('http://biografoimaginario.com:8888/logout',
					{
						method: 'GET',
						dataType: 'json',
						xhrFields: { withCredentials: true },
						crossDomain: true,
						success: (data) => {
							console.log(`Logout: ${Object.values(data)}`)
						},
					}
				);
			}
		</script>
		<style>
			video{
				position: absolute;
				width: 100vw;
				height: 100vh;
				opacity: 0;
			}
		</style>
	</head>
	<body>
		<form method="post" action="http://biografoimaginario.com:8888/signUp">
			SIGN UP
			<input type="email" name="username" maxlength='64' pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" placeholder="email" id='signupemail' required>
			<input type="password" name="password" placeholder="password" id='signuppassword' required>
			<button type="button" onclick="signup()">signup</button>
		</form>
		<br>
		<br>
		<br>
		<br>
		<form method="post" action="http://biografoimaginario.com:8888/login">
			Login
			<input type="email" name="username" maxlength='64' pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" placeholder="email" id='loginemail' required>
			<input type="password" name="password" placeholder="password" id="loginpassword" required>
			<button type="button" onclick="login()">login</button>
		</form>
		<br>
		<br>
		<br>
		<br>
		<button onclick="checklogin()">Check Login</button>
		<button onclick="logout()">Log Out</button>
	</body>
</html>